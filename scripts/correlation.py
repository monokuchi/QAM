
import matplotlib.pyplot as plt
import numpy as np
from scipy import signal as sig

signal = [(-0.0118987,-0.0118987), (-0.0142584,-0.0142584), (0.00180723,0.00180723), (0.0256811,0.0256811), (0.0212171,0.0212171), (-0.00797445,-0.00797445), (-0.0432086,-0.0432086), (-0.0552378,-0.0552378), (-0.0353798,-0.0353798), (0.0301317,0.0301317), (0.110395,0.110395), (0.139661,0.139661), (0.0396217,0.0396217), (-0.192555,-0.192555), (-0.50495,-0.50495), (-0.810719,-0.810719), (-1.04235,-1.04235), (-1.14293,-1.14293), (-1.12029,-1.12029), (-1.03341,-1.03341), (-0.967349,-0.967349), (-0.948036,-0.948036), (-0.966691,-0.966691), (-0.995299,-0.995299), (-1.02395,-1.02395), (-1.02895,-1.02895), (-1.01171,-1.01171), (-0.989015,-0.989015), (-0.99083,-0.99083), (-1.00327,-1.00327), (-1.0099,-1.0099), (-1.00327,-1.00327), (-1.00273,-0.978931), (-1.00327,-0.974757), (-1.0099,-1.01351), (-1.00327,-1.05464), (-0.978931,-1.06896), (-0.974757,-1.01584), (-1.01351,-0.919868), (-1.05464,-0.841436), (-1.04516,-0.865737), (-0.987325,-1.05097), (-0.923482,-1.32072), (-0.892798,-1.44443), (-0.931969,-1.19517), (-1.06354,-0.541951), (-1.23069,0.307208), (-1.2826,1.00796), (-1.08197,1.20818), (-0.618163,0.808706), (-5.93718e-09,0.00361446), (0.618163,-0.78586), (1.05817,-1.16574), (1.25408,-0.995394), (1.2343,-0.397239), (1.1149,0.380113), (0.974403,1.08197), (0.876849,1.52065), (0.837065,1.62793), (0.876849,1.44077), (0.9982,1.01574), (1.14342,0.396062), (1.23069,-0.310822), (1.20272,-0.884918), (1.01574,-1.11878), (0.634112,-0.874641), (0.0864172,-0.213562), (-0.507688,0.580745), (-1.03501,1.19517), (-1.37138,1.40564), (-1.44787,1.22708), (-1.2915,0.917648), (-0.968778,0.776341), (-0.523637,0.917648), (5.93718e-09,1.22708), (0.523637,1.40564), (0.992575,1.19517), (1.32001,0.580745), (1.44425,-0.213562), (1.32001,-0.874641), (0.992576,-1.11878), (0.523637,-0.884918), (-5.93718e-09,-0.310822), (-0.523637,0.396062), (-0.992575,1.03954), (-1.32001,1.46928), (-1.44425,1.62431), (-1.32001,1.46928), (-0.968778,1.03954), (-0.49512,0.396062), (-0.00361446,-0.310822), (0.472274,-0.884918), (0.926344,-1.09498), (1.30745,-0.846124), (1.53428,-0.217176), (1.48185,0.529383), (1.10577,1.10514), (0.447424,1.36456), (-0.307208,1.32072), (-0.913435,1.13085), (-1.14258,0.955766), (-0.874641,0.854004), (-0.213562,0.829836), (0.580745,0.854004), (1.17137,0.931969), (1.37712,1.10233), (1.23069,1.32434), (0.96901,1.41592), (0.842572,1.17137), (0.930216,0.541951), (1.13704,-0.307208), (1.2438,-1.00796), (1.10577,-1.23197), (0.685475,-0.837223), (0.0900316,5.93718e-09), (-0.536205,0.837223), (-1.05881,1.23198), (-1.37138,1.00796), (-1.44787,0.307208), (-1.2915,-0.541951), (-0.968778,-1.17137), (-0.523637,-1.41592), (5.93718e-09,-1.32434), (0.523637,-1.10233), (0.992575,-0.931969), (1.32001,-0.854004), (1.44425,-0.829836), (1.32001,-0.854004), (0.992576,-0.931969), (0.523637,-1.10233), (-5.93718e-09,-1.32434), (-0.523637,-1.41592), (-0.992575,-1.17137), (-1.32001,-0.541951), (-1.44425,0.307208), (-1.32001,1.00796), (-0.968778,1.23197), (-0.49512,0.837223), (-0.00361446,-5.93718e-09), (0.472274,-0.837223), (0.926344,-1.23198), (1.30745,-1.00796), (1.53428,-0.307208), (1.48185,0.541951), (1.10577,1.17137), (0.447424,1.41592), (-0.307208,1.32434), (-0.913435,1.10233), (-1.14258,0.931969), (-0.874641,0.854004), (-0.213562,0.829836), (0.580745,0.854004), (1.17137,0.931969), (1.37712,1.10233), (1.23069,1.32434), (0.96901,1.41592), (0.818775,1.19517), (0.901699,0.570468), (1.14066,-0.310822), (1.29516,-1.05932), (1.172,-1.29821), (0.698043,-0.849791), (2.38651e-08,0.0900316), (-0.698043,0.999061), (-1.172,1.36897), (-1.29516,0.960266), (-1.14066,-0.00361449), (-0.901699,-0.983112), (-0.794978,-1.3876), (-0.940493,-0.983112), (-1.2343,-0.00361446), (-1.42849,0.960266), (-1.2376,1.34517), (-0.593313,0.970544), (0.303593,0.0936461), (1.03648,-0.798428), (1.25577,-1.25577), (0.837223,-1.07527), (-5.93718e-09,-0.397239), (-0.837223,0.459992), (-1.25577,1.172), (-1.03648,1.53321), (-0.303593,1.5379), (0.593313,1.27893), (1.2376,0.878749), (1.42849,0.443758), (1.2343,5.93718e-09), (0.940493,-0.443758), (0.818775,-0.902547), (0.930216,-1.30745), (1.13704,-1.53428), (1.2438,-1.48185), (1.10577,-1.10577), (0.685475,-0.447424), (0.0900316,0.307208), (-0.536205,0.913435), (-1.05881,1.14258), (-1.37138,0.874641), (-1.44787,0.213562), (-1.2915,-0.580745), (-0.944981,-1.19517), (-0.49512,-1.40564), (-0.00361446,-1.22708), (0.472274,-0.917648), (0.926344,-0.776341), (1.30745,-0.917648), (1.53428,-1.22708), (1.48185,-1.40564), (1.10577,-1.19517), (0.447424,-0.580745), (-0.307208,0.213562), (-0.913435,0.874641), (-1.14258,1.14258), (-0.874641,0.913435), (-0.213562,0.307208), (0.580745,-0.447425), (1.19517,-1.08197), (1.40564,-1.45334), (1.22708,-1.5379), (0.917648,-1.35881), (0.776341,-0.968778), (0.917648,-0.456326), (1.22708,0.0900316), (1.40564,0.605595), (1.21896,0.991943), (0.609262,1.20272), (-0.217176,1.23069), (-0.926003,1.14342), (-1.20881,1.022), (-0.926003,0.905366), (-0.217176,0.83345), (0.609262,0.825487), (1.19517,0.931969), (1.37712,1.13085), (1.23069,1.32072), (0.96901,1.36455), (0.842572,1.10514), (0.930216,0.529383), (1.13704,-0.217176), (1.2438,-0.846124), (1.10577,-1.11878), (0.685475,-0.913435), (0.0900316,-0.307208), (-0.536205,0.447425), (-1.05881,1.08197), (-1.37138,1.45334), (-1.44787,1.5379), (-1.2915,1.35881), (-0.944981,0.992576), (-0.49512,0.484842), (-0.00361446,-0.0936461), (0.472274,-0.656958), (0.902547,-1.08197), (1.27893,-1.2438), (1.5379,-1.13704), (1.53321,-0.930216), (1.172,-0.818775), (0.459992,-0.940493), (-0.397239,-1.2343), (-1.07527,-1.42849), (-1.25577,-1.2376), (-0.798428,-0.593313), (0.0936461,0.303593), (0.970544,1.03648), (1.34517,1.25577), (0.960266,0.837223), (-0.00361449,-5.93718e-09), (-0.983112,-0.837223), (-1.3876,-1.23198), (-0.983112,-1.00796), (-0.00361446,-0.307208), (0.960266,0.541951), (1.36897,1.17137), (0.999061,1.41592), (0.0900316,1.32434), (-0.849791,1.10233), (-1.322,0.931969), (-1.08784,0.854004), (-0.307208,0.829836), (0.62183,0.854004), (1.28519,0.955766), (1.457,1.13085), (1.23069,1.32072), (0.889131,1.36455), (0.728746,1.12893), (0.889131,0.5579), (1.23069,-0.220791), (1.457,-0.897486), (1.28519,-1.18501), (0.62183,-0.926003), (-0.307208,-0.217176), (-1.08784,0.609262), (-1.322,1.21896), (-0.849791,1.40564), (0.0900316,1.22708), (0.999061,0.917648), (1.34517,0.752544), (0.931749,0.889131), (-2.38651e-08,1.23069), (-0.931749,1.457), (-1.34517,1.2614), (-0.999061,0.593313), (-0.0900316,-0.303593), (0.849791,-1.03648), (1.322,-1.25577), (1.08784,-0.837223), (0.307208,5.93718e-09), (-0.62183,0.837223), (-1.28519,1.25577), (-1.457,1.03648), (-1.23069,0.303593), (-0.889131,-0.593313), (-0.728746,-1.2376), (-0.889131,-1.42849), (-1.23069,-1.2343), (-1.457,-0.940493), (-1.28519,-0.794978), (-0.62183,-0.901699), (0.307208,-1.14066), (1.08784,-1.29516), (1.322,-1.1482), (0.849791,-0.669526), (-0.0900316,-0.00361449), (-0.999061,0.64668), (-1.36897,1.10577), (-0.960266,1.2826), (0.00361449,1.23069), (0.983112,1.06354), (1.4114,0.931969), (1.01163,0.892798), (-5.93718e-09,0.923482), (-1.01163,0.987325), (-1.4114,1.02137), (-0.983112,1.02612), (-0.00361446,1.01713), (0.960266,1.02612), (1.35707,1.03326), (0.984802,1.00158), (0.0918389,0.921675), (-0.824109,0.867117), (-1.27699,0.910752), (-1.0673,1.07151), (-0.354031,1.2739), (0.51523,1.33783), (1.18358,1.11735), (1.47457,0.588032), (1.43112,-0.110395), (1.19063,-0.757825), (0.905359,-1.12159), (0.648881,-1.09004), (0.414918,-0.72574), (0.205123,-0.252818), (0.0266098,0.110381), (-0.088299,0.250137), (-0.106781,0.196812), (-0.0586485,0.0460806), (0.0115824,-0.077814), (0.0552378,-0.1066), (0.0432086,-0.046823), (0.00797445,0.0205424), (-0.0212171,0.0450145), (-0.0256811,0.0256811), (-0.00180723,0.00180723), (0.0142584,-0.0142584), (0.0118987,-0.0118987)]
signal = np.array([i[0]+1j*i[1] for i in signal])
pilot_signal = np.exp(1j*.5) * signal[16:47]
correlated_signal = sig.correlate(signal, pilot_signal)

# print(np.angle(correlated_signal[np.argmax(correlated_signal)]))

plt.subplot(3, 1, 1)
plt.title("Complex TX Signal")
plt.plot(signal.real)
plt.plot(signal.imag)

plt.subplot(3, 1, 2)
plt.title("Pilot Signal")
plt.plot(pilot_signal.real)
plt.plot(pilot_signal.imag)

plt.subplot(3, 1, 3)
plt.title("Correlated Signal")
plt.plot(abs(correlated_signal))

plt.show()
